<!-- Floating Responsive Navbar -->
<nav
  class="navbar navbar-expand-lg navbar-light fixed-top shadow-sm mb-5"
  style="background-color: #f8f9fa; border-bottom: 2px solid #ddd"
>
  <div class="container-fluid">
    <!-- Brand with Icon -->
    <a
      class="navbar-brand d-flex align-items-center"
      href="/listings"
      style="margin-left: 5rem"
    >
      <img
        src="/images/icon.png"
        alt="HotelHive Logo"
        class="me-2"
        style="height: 40px"
      />
      <span style="font-family: 'Pacifico', serif; font-size: 1.5rem"
        >HotelHive</span
      >
    </a>

    <!-- Offcanvas Toggler Button for Small Screens -->
    <button
      class="btn d-lg-none"
      type="button"
      data-bs-toggle="offcanvas"
      data-bs-target="#mobileMenu"
      aria-controls="mobileMenu"
    >
      <i class="bi bi-list fs-3"></i>
    </button>

    <!-- Regular Navbar for Large Screens -->
    <div
      class="collapse navbar-collapse justify-content-end d-none d-lg-flex"
      id="navbarNav"
    >
      <ul class="navbar-nav mb-2 mb-lg-0" style="gap: 10px">
        <li class="nav-item">
          <a class="nav-link custom-hover" href="/listings/aboutus">About Us</a>
        </li>
        <li class="nav-item">
          <a class="nav-link custom-hover" href="/listings/contact">Contact</a>
        </li>

        <!-- Search Bar -->
        <li class="nav-item d-none d-lg-block">
          <form
            class="d-flex"
            role="search"
            action="/search"
            method="GET"
            style="position: relative"
          >
            <input
              class="form-control me-2 rounded-pill ps-3 pe-5 shadow-none"
              type="search"
              name="query"
              placeholder="Search Place!"
              style="min-width: 220px"
            />

            <button
              class="btn btn-outline-secondary position-absolute end-0 top-0 bottom-0 me-2 my-auto py-1 px-3 rounded-pill"
              type="submit"
              style="border: none; background-color: transparent"
            >
              <i class="bi bi-search"></i>
            </button>
          </form>
        </li>

        <!-- Dropdown Menu (Visible on Large Screens) -->
        <li class="nav-item dropdown">
          <a
            class="nav-link"
            href="#"
            id="navbarDropdown"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <i class="bi bi-list"></i>
          </a>
          <ul
            class="dropdown-menu dropdown-menu-end custom-dropdown"
            aria-labelledby="navbarDropdown"
          >
            <% if (!currUser) { %>
            <li>
              <a class="dropdown-item custom-hover" href="/user/register"
                >Register <i class="bi bi-person-add ms-2"></i
              ></a>
            </li>
            <li>
              <a class="dropdown-item custom-hover" href="/user/login"
                >Login <i class="bi bi-door-open-fill ms-2"></i
              ></a>
            </li>
            <% } else { %>
            <li>
              <a class="dropdown-item custom-hover" href="/dashboard/home">
                Hello @<%= currUser.name %>
              </a>
            </li>
            <li><hr class="dropdown-divider" /></li>
              <li>
              <a class="dropdown-item custom-hover" href="/bookings/mybookings"
                >My Bookings</a>
            </li>
            <li>
              <a class="dropdown-item custom-hover" href="/user/logout"
                >Logout <i class="bi bi-door-open-fill ms-2"></i
              ></a>
            </li>
            <% } %>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Offcanvas Menu for Small Screens -->
<div
  class="offcanvas offcanvas-start"
  tabindex="-1"
  id="mobileMenu"
  aria-labelledby="mobileMenuLabel"
>
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="mobileMenuLabel">Menu</h5>
    <button
      type="button"
      class="btn-close text-reset"
      data-bs-dismiss="offcanvas"
      aria-label="Close"
    ></button>
  </div>
  <div class="offcanvas-body p-0">
    <ul class="list-group list-group-flush">
      <li class="list-group-item border-bottom">
        <a class="nav-link" href="/listings/aboutus">About Us</a>
      </li>
      <li class="list-group-item border-bottom">
        <a class="nav-link" href="/listings/contact">Contact</a>
      </li>

      <% if (!currUser) { %>
      <li class="list-group-item border-bottom">
        <a class="nav-link" href="/user/register"
          >Register <i class="bi bi-person-add ms-2"></i
        ></a>
      </li>
      <li class="list-group-item border-bottom">
        <a class="nav-link" href="/user/login"
          >Login <i class="bi bi-door-open-fill ms-2"></i
        ></a>
      </li>
      <% } else { %>
      <li class="list-group-item border-bottom">
        <a class="nav-link" href="/dashboard/home">
          Hello @<%= currUser.name %>
        </a>
      </li>
      <li class="list-group-item border-bottom">
        <a class="nav-link" href="/bookings/mybookings">
          My Bookings
        </a>
      </li>
      <li class="list-group-item border-bottom">
        <a class="nav-link" href="/user/logout"
          >Logout <i class="bi bi-door-open-fill ms-2"></i
        ></a>
      </li>
      <% } %>
    </ul>
  </div>
</div>
